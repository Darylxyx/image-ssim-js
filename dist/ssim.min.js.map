{"version":3,"sources":["ssim.min.js","/source/ssim.min.js"],"names":["f","exports","module","define","window","n","global","o","bitsPerComponent","require","SSIM","image2","l","s","t","e","r","length","compare","K2","lumaValues1","averageLumaValue2","sigsqx","image1","windowSize","K1","luminance","iteration","lumaValues2","averageLumaValue1","sigxy","sigsqy","i","Math","pow","numPixelsInWin","numerator","c1","c2","denominator","mssim","numWindows","width","height","Error","L","Internals","_iterate","Channels","callback","y","x","windowWidth","min","windowHeight","_lumaValuesForWindow","averageLuma1","_averageLuma","averageLuma2","image","array","data","lumaValues","Float32Array","ArrayBuffer","counter","maxj","j","offset","channels","maxi","sumLuma"],"mappings":"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","file":"ssim.min.js","sourcesContent":["!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var r;r=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,r.SSIM=e()}}(function(){return function e(r,n,t){function o(f,a){if(!n[f]){if(!r[f]){var u=\"function\"==typeof require&&require;if(!a&&u)return u(f,!0);if(i)return i(f,!0);var h=new Error(\"Cannot find module '\"+f+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var l=n[f]={exports:{}};r[f][0].call(l.exports,function(e){var n=r[f][1][e];return o(n?n:e)},l,l.exports,e,r,n,t)}return n[f].exports}for(var i=\"function\"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}({1:[function(e,r,n){var t;!function(e){\"use strict\";function r(e,r,t,o,i,f,a){function u(e,r,n,t){var o,i,f;o=i=f=0;for(var a=0;a<e.length;a++)i+=Math.pow(e[a]-n,2),f+=Math.pow(r[a]-t,2),o+=(e[a]-n)*(r[a]-t);var u=e.length-1;i/=u,f/=u,o/=u;var h=(2*n*t+l)*(2*o+c),p=(Math.pow(n,2)+Math.pow(t,2)+l)*(i+f+c);s+=h/p,d++}if(void 0===t&&(t=8),void 0===o&&(o=.01),void 0===i&&(i=.03),void 0===f&&(f=!0),void 0===a&&(a=8),e.width!==r.width||e.height!==r.height)throw new Error(\"Images have different sizes!\");var h=(1<<a)-1,l=Math.pow(o*h,2),c=Math.pow(i*h,2),d=0,s=0;return n._iterate(e,r,t,f,u),s/d}!function(e){e[e.Grey=1]=\"Grey\",e[e.GreyAlpha=2]=\"GreyAlpha\",e[e.RGB=3]=\"RGB\",e[e.RGBAlpha=4]=\"RGBAlpha\"}(e.Channels||(e.Channels={}));e.Channels;e.compare=r;var n;!function(e){function r(e,r,o,i,f){for(var a=e.width,u=e.height,h=0;u>h;h+=o)for(var l=0;a>l;l+=o){var c=Math.min(o,a-l),d=Math.min(o,u-h),s=n(e,l,h,c,d,i),p=n(r,l,h,c,d,i),v=t(s),w=t(p);f(s,p,v,w)}}function n(e,r,n,t,o,i){for(var f=e.data,a=new Float32Array(new ArrayBuffer(t*o*4)),u=0,h=n+o,l=n;h>l;l++){var c=l*e.width,d=(c+r)*e.channels,s=(c+r+t)*e.channels;switch(e.channels){case 1:for(;s>d;)a[u++]=f[d++];break;case 2:for(;s>d;)a[u++]=f[d++]*(f[d++]/255);break;case 3:if(i)for(;s>d;)a[u++]=.212655*f[d++]+.715158*f[d++]+.072187*f[d++];else for(;s>d;)a[u++]=f[d++]+f[d++]+f[d++];break;case 4:if(i)for(;s>d;)a[u++]=(.212655*f[d++]+.715158*f[d++]+.072187*f[d++])*(f[d++]/255);else for(;s>d;)a[u++]=(f[d++]+f[d++]+f[d++])*(f[d++]/255)}}return a}function t(e){for(var r=0,n=0;n<e.length;n++)r+=e[n];return r/e.length}e._iterate=r}(n||(n={}))}(t||(t={})),r.exports=t},{}]},{},[1])(1)});\n//# sourceMappingURL=ssim.min.js.map","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var r;r=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,r.SSIM=e()}}(function(){return function e(r,n,t){function o(f,a){if(!n[f]){if(!r[f]){var u=\"function\"==typeof require&&require;if(!a&&u)return u(f,!0);if(i)return i(f,!0);var h=new Error(\"Cannot find module '\"+f+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var l=n[f]={exports:{}};r[f][0].call(l.exports,function(e){var n=r[f][1][e];return o(n?n:e)},l,l.exports,e,r,n,t)}return n[f].exports}for(var i=\"function\"==typeof require&&require,f=0;f<t.length;f++)o(t[f]);return o}({1:[function(e,r,n){var t;!function(e){\"use strict\";function r(e,r,t,o,i,f,a){function u(e,r,n,t){var o,i,f;o=i=f=0;for(var a=0;a<e.length;a++)i+=Math.pow(e[a]-n,2),f+=Math.pow(r[a]-t,2),o+=(e[a]-n)*(r[a]-t);var u=e.length-1;i/=u,f/=u,o/=u;var h=(2*n*t+l)*(2*o+c),p=(Math.pow(n,2)+Math.pow(t,2)+l)*(i+f+c);s+=h/p,d++}if(void 0===t&&(t=8),void 0===o&&(o=.01),void 0===i&&(i=.03),void 0===f&&(f=!0),void 0===a&&(a=8),e.width!==r.width||e.height!==r.height)throw new Error(\"Images have different sizes!\");var h=(1<<a)-1,l=Math.pow(o*h,2),c=Math.pow(i*h,2),d=0,s=0;return n._iterate(e,r,t,f,u),s/d}!function(e){e[e.Grey=1]=\"Grey\",e[e.GreyAlpha=2]=\"GreyAlpha\",e[e.RGB=3]=\"RGB\",e[e.RGBAlpha=4]=\"RGBAlpha\"}(e.Channels||(e.Channels={}));e.Channels;e.compare=r;var n;!function(e){function r(e,r,o,i,f){for(var a=e.width,u=e.height,h=0;u>h;h+=o)for(var l=0;a>l;l+=o){var c=Math.min(o,a-l),d=Math.min(o,u-h),s=n(e,l,h,c,d,i),p=n(r,l,h,c,d,i),v=t(s),w=t(p);f(s,p,v,w)}}function n(e,r,n,t,o,i){for(var f=e.data,a=new Float32Array(new ArrayBuffer(t*o*4)),u=0,h=n+o,l=n;h>l;l++){var c=l*e.width,d=(c+r)*e.channels,s=(c+r+t)*e.channels;switch(e.channels){case 1:for(;s>d;)a[u++]=f[d++];break;case 2:for(;s>d;)a[u++]=f[d++]*(f[d++]/255);break;case 3:if(i)for(;s>d;)a[u++]=.212655*f[d++]+.715158*f[d++]+.072187*f[d++];else for(;s>d;)a[u++]=f[d++]+f[d++]+f[d++];break;case 4:if(i)for(;s>d;)a[u++]=(.212655*f[d++]+.715158*f[d++]+.072187*f[d++])*(f[d++]/255);else for(;s>d;)a[u++]=(f[d++]+f[d++]+f[d++])*(f[d++]/255)}}return a}function t(e){for(var r=0,n=0;n<e.length;n++)r+=e[n];return r/e.length}e._iterate=r}(n||(n={}))}(t||(t={})),r.exports=t},{}]},{},[1])(1)});\n//# sourceMappingURL=ssim.min.js.map"],"sourceRoot":"/source/"}